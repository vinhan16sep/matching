!function(){var j={},i=function(a){for(var v=j[a],u=v.deps,t=v.defn,s=u.length,r=new Array(s),q=0;q<s;++q){r[q]=o(u[q])}var d=t.apply(null,r);if(void 0===d){throw"module ["+a+"] returned undefined"}v.instance=d},p=function(a,f,e){if("string"!=typeof a){throw"module id must be a string"}if(void 0===f){throw"no dependencies for "+a}if(void 0===e){throw"no definition function for "+a}j[a]={deps:f,defn:e,instance:void 0}},o=function(b){var a=j[b];if(void 0===a){throw"module ["+b+"] was undefined"}return void 0===a.instance&&i(b),a.instance},n=function(g,d){for(var r=g.length,q=new Array(r),h=0;h<r;++h){q[h]=o(g[h])}d.apply(null,q)},m={};m.bolt={module:{api:{define:p,require:n,demand:o}}};var l=p,k=function(d,c){l(d,[],function(){return c})};k("4",tinymce.util.Tools.resolve),l("1",["4"],function(b){return b("tinymce.PluginManager")}),l("6",["4"],function(b){return b("tinymce.Env")}),l("7",["4"],function(b){return b("tinymce.util.Tools")}),l("8",[],function(){var e=function(b){return parseInt(b.getParam("plugin_preview_width","650"),10)},d=function(b){return parseInt(b.getParam("plugin_preview_height","500"),10)},f=function(b){return b.getParam("content_style","")};return{getPreviewDialogWidth:e,getPreviewDialogHeight:d,getContentStyle:f}}),l("9",["7","8"],function(f,e){var h=function(w){var v,u="",t=w.dom.encode,s=e.getContentStyle(w);u+='<base href="'+t(w.documentBaseURI.getURI())+'">',s&&(u+='<style type="text/css">'+s+"</style>"),f.each(w.contentCSS,function(c){u+='<link type="text/css" rel="stylesheet" href="'+t(w.documentBaseURI.toAbsolute(c))+'">'});var r=w.settings.body_id||"tinymce";r.indexOf("=")!==-1&&(r=w.getParam("body_id","","hash"),r=r[w.id]||r);var q=w.settings.body_class||"";q.indexOf("=")!==-1&&(q=w.getParam("body_class","","hash"),q=q[w.id]||"");var b='<script>document.addEventListener && document.addEventListener("click", function(e) {for (variables elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);<\/script> ',a=w.settings.directionality?' dir="'+w.settings.directionality+'"':"";return v="<!DOCTYPE html><html><head>"+u+'</head><body id="'+t(r)+'" class="mce-content-body '+t(q)+'"'+t(a)+">"+w.getContent()+b+"</body></html>"},g=function(q,c,t){var s=h(q);if(t){c.src="data:text/html;charset=utf-8,"+encodeURIComponent(s)}else{var r=c.contentWindow.document;r.open(),r.write(s),r.close()}};return{getPreviewHtml:h,injectIframeContent:g}}),l("5",["6","7","8","9"],function(g,f,r,q){var h=function(a){var t=!g.ie,s='<iframe src="javascript:\'\'" frameborder="0"'+(t?' sandbox="allow-scripts"':"")+"></iframe>",d=r.getPreviewDialogWidth(a),c=r.getPreviewDialogHeight(a);a.windowManager.open({title:"Preview",width:d,height:c,html:s,buttons:{text:"Close",onclick:function(b){b.control.parent().parent().close()}},onPostRender:function(b){var e=b.control.getEl("body").firstChild;q.injectIframeContent(a,e,t)}})};return{open:h}}),l("2",["5"],function(d){var c=function(a){a.addCommand("mcePreview",function(){d.open(a)})};return{register:c}}),l("3",[],function(){var b=function(c){c.addButton("preview",{title:"Preview",cmd:"mcePreview"}),c.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})};return{register:b}}),l("0",["1","2","3"],function(e,d,f){return e.add("preview",function(b){d.register(b),f.register(b)}),function(){}}),o("0")()}();