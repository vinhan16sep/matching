define("tinymce/WindowManager",["tinymce/ui/Window","tinymce/ui/MessageBox"],function(b,a){return function(g){var f=this,h=[];function d(){if(h.length){return h[h.length-1]}}function e(i){g.fire("OpenWindow",{win:i})}function c(i){g.fire("CloseWindow",{win:i})}f.windows=h;g.on("remove",function(){var j=h.length;while(j--){h[j].close()}});f.open=function(i,k){var j;g.editorManager.setActive(g);i.title=i.title||" ";i.url=i.url||i.file;if(i.url){i.width=parseInt(i.width||320,10);i.height=parseInt(i.height||240,10)}if(i.body){i.items={defaults:i.defaults,type:i.bodyType||"form",items:i.body,data:i.data,callbacks:i.commands}}if(!i.url&&!i.buttons){i.buttons=[{text:"Ok",subtype:"primary",onclick:function(){j.find("form")[0].submit()}},{text:"Cancel",onclick:function(){j.close()}}]}j=new b(i);h.push(j);j.on("close",function(){var l=h.length;while(l--){if(h[l]===j){h.splice(l,1)}}if(!h.length){g.focus()}c(j)});if(i.data){j.on("postRender",function(){this.find("*").each(function(m){var l=m.name();if(l in i.data){m.value(i.data[l])}})})}j.features=i||{};j.params=k||{};if(h.length===1){g.nodeChanged()}j=j.renderTo().reflow();e(j);return j};f.alert=function(j,l,i){var k;k=a.alert(j,function(){if(l){l.call(i||this)}else{g.focus()}});k.on("close",function(){c(k)});e(k)};f.confirm=function(j,l,i){var k;k=a.confirm(j,function(m){l.call(i||this,m)});k.on("close",function(){c(k)});e(k)};f.close=function(){if(d()){d().close()}};f.getParams=function(){return d()?d().params:null};f.setParams=function(i){if(d()){d().params=i}};f.getWindows=function(){return h}}});