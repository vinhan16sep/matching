define("tinymce/Editor",["tinymce/dom/DOMUtils","tinymce/dom/DomQuery","tinymce/AddOnManager","tinymce/NodeChange","tinymce/html/Node","tinymce/dom/Serializer","tinymce/html/Serializer","tinymce/dom/Selection","tinymce/Formatter","tinymce/UndoManager","tinymce/EnterKey","tinymce/ForceBlocks","tinymce/EditorCommands","tinymce/util/URI","tinymce/dom/ScriptLoader","tinymce/dom/EventUtils","tinymce/WindowManager","tinymce/NotificationManager","tinymce/html/Schema","tinymce/html/DomParser","tinymce/util/Quirks","tinymce/Env","tinymce/util/Tools","tinymce/util/Delay","tinymce/EditorObservable","tinymce/Mode","tinymce/Shortcuts","tinymce/EditorUpload","tinymce/SelectionOverrides","tinymce/util/Uuid"],function(Q,x,z,i,u,H,F,B,v,j,G,D,s,A,o,p,J,K,k,b,y,L,m,q,f,e,N,d,h,c){var w=Q.DOM,M=z.ThemeManager,P=z.PluginManager;var l=m.extend,I=m.each,n=m.explode;var O=m.inArray,a=m.trim,r=m.resolve;var E=p.Event;var g=L.gecko,C=L.ie;function t(X,U,W){var S=this,R,V,T;R=S.documentBaseUrl=W.documentBaseURL;V=W.baseURI;T=W.defaultSettings;U=l({id:X,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:R,add_form_submit_trigger:true,submit_patch:true,add_unload_trigger:true,convert_urls:true,relative_urls:true,remove_script_host:true,object_resizing:true,doctype:"<!DOCTYPE html>",visual:true,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:true,padd_empty_editor:true,render_ui:true,indentation:"30px",inline_styles:true,convert_fonts_to_spans:true,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",validate:true,entity_encoding:"named",url_converter:S.convertURL,url_converter_scope:S,ie7_compat:true},T,U);if(T&&T.external_plugins&&U.external_plugins){U.external_plugins=l({},T.external_plugins,U.external_plugins)}S.settings=U;z.language=U.language||"en";z.languageLoad=U.language_load;z.baseURL=W.baseURL;S.id=U.id=X;S.setDirty(false);S.plugins={};S.documentBaseURI=new A(U.document_base_url||R,{base_uri:V});S.baseURI=V;S.contentCSS=[];S.contentStyles=[];S.shortcuts=new N(S);S.loadedCSS={};S.editorCommands=new s(S);if(U.target){S.targetElm=U.target}S.suffix=W.suffix;S.editorManager=W;S.inline=U.inline;S.settings.content_editable=S.inline;if(U.cache_suffix){L.cacheSuffix=U.cache_suffix.replace(/^[\?\&]+/,"")}if(U.override_viewport===false){L.overrideViewPort=false}W.fire("SetupEditor",S);S.execCallback("setup",S);S.$=x.overrideDefaults(function(){return{context:S.inline?S.getBody():S.getDoc(),element:S.getBody()}})}t.prototype={render:function(){var R=this,U=R.settings,X=R.id,W=R.suffix;function T(){w.unbind(window,"ready",T);R.render()}if(!E.domLoaded){w.bind(window,"ready",T);return}if(!R.getElement()){return}if(!L.contentEditable){return}if(!U.inline){R.orgVisibility=R.getElement().style.visibility;R.getElement().style.visibility="hidden"}else{R.inline=true}var V=R.getElement().form||w.getParent(X,"form");if(V){R.formElement=V;if(U.hidden_input&&!/TEXTAREA|INPUT/i.test(R.getElement().nodeName)){w.insertAfter(w.create("input",{type:"hidden",name:X}),X);R.hasHiddenInput=true}R.formEventDelegate=function(Y){R.fire(Y.type,Y)};w.bind(V,"submit reset",R.formEventDelegate);R.on("reset",function(){R.setContent(R.startContent,{format:"raw"})});if(U.submit_patch&&!V.submit.nodeType&&!V.submit.length&&!V._mceOldSubmit){V._mceOldSubmit=V.submit;V.submit=function(){R.editorManager.triggerSave();R.setDirty(false);return V._mceOldSubmit(V)}}}R.windowManager=new J(R);R.notificationManager=new K(R);if(U.encoding=="xml"){R.on("GetContent",function(Y){if(Y.save){Y.content=w.encode(Y.content)}})}if(U.add_form_submit_trigger){R.on("submit",function(){if(R.initialized){R.save()}})}if(U.add_unload_trigger){R._beforeUnload=function(){if(R.initialized&&!R.destroyed&&!R.isHidden()){R.save({format:"raw",no_events:true,set_dirty:false})}};R.editorManager.on("BeforeUnload",R._beforeUnload)}function S(){var Z=o.ScriptLoader;if(U.language&&U.language!="en"&&!U.language_url){U.language_url=R.editorManager.baseURL+"/langs/"+U.language+".js"}if(U.language_url){Z.add(U.language_url)}if(U.theme&&typeof U.theme!="function"&&U.theme.charAt(0)!="-"&&!M.urls[U.theme]){var Y=U.theme_url;if(Y){Y=R.documentBaseURI.toAbsolute(Y)}else{Y="themes/"+U.theme+"/theme"+W+".js"}M.load(U.theme,Y)}if(m.isArray(U.plugins)){U.plugins=U.plugins.join(" ")}I(U.external_plugins,function(ab,aa){P.load(aa,ab);U.plugins+=" "+aa});I(U.plugins.split(/[ ,]/),function(aa){aa=a(aa);if(aa&&!P.urls[aa]){if(aa.charAt(0)=="-"){aa=aa.substr(1,aa.length);var ab=P.dependencies(aa);I(ab,function(ad){var ac={prefix:"plugins/",resource:ad,suffix:"/plugin"+W+".js"};ad=P.createUrl(ac,ad);P.load(ad.resource,ad)})}else{P.load(aa,{prefix:"plugins/",resource:aa,suffix:"/plugin"+W+".js"})}}});Z.loadQueue(function(){if(!R.removed){R.init()}})}R.editorManager.add(R);S()},init:function(){var Z=this,ai=Z.settings,V=Z.getElement();var X,ag,U,ac,aa,R,S,ak,af,ab,ae,T=[];Z.rtl=ai.rtl_ui||Z.editorManager.i18n.rtl;Z.editorManager.i18n.setCode(ai.language);ai.aria_label=ai.aria_label||w.getAttrib(V,"aria-label",Z.getLang("aria.rich_text_area"));Z.fire("ScriptsLoaded");if(ai.theme){if(typeof ai.theme!="function"){ai.theme=ai.theme.replace(/-/,"");R=M.get(ai.theme);Z.theme=new R(Z,M.urls[ai.theme]);if(Z.theme.init){Z.theme.init(Z,M.urls[ai.theme]||Z.documentBaseUrl.replace(/\/$/,""),Z.$)}}else{Z.theme=ai.theme}}function aj(ao){var an=P.get(ao),am,al;am=P.urls[ao]||Z.documentBaseUrl.replace(/\/$/,"");ao=a(ao);if(an&&O(T,ao)===-1){I(P.dependencies(ao),function(ap){aj(ap)});if(Z.plugins[ao]){return}al=new an(Z,am,Z.$);Z.plugins[ao]=al;if(al.init){al.init(Z,am);T.push(ao)}}}I(ai.plugins.replace(/\-/g,"").split(/[ ,]/),aj);if(ai.render_ui&&Z.theme){Z.orgDisplay=V.style.display;if(typeof ai.theme!="function"){X=ai.width||V.style.width||V.offsetWidth;ag=ai.height||V.style.height||V.offsetHeight;U=ai.min_height||100;ab=/^[0-9\.]+(|px)$/i;if(ab.test(""+X)){X=Math.max(parseInt(X,10),100)}if(ab.test(""+ag)){ag=Math.max(parseInt(ag,10),U)}aa=Z.theme.renderUI({targetNode:V,width:X,height:ag,deltaWidth:ai.delta_width,deltaHeight:ai.delta_height});if(!ai.content_editable){ag=(aa.iframeHeight||ag)+(typeof ag=="number"?(aa.deltaHeight||0):"");if(ag<U){ag=U}}}else{aa=ai.theme(Z,V);if(aa.editorContainer.nodeType){aa.editorContainer=aa.editorContainer.id=aa.editorContainer.id||Z.id+"_parent"}if(aa.iframeContainer.nodeType){aa.iframeContainer=aa.iframeContainer.id=aa.iframeContainer.id||Z.id+"_iframecontainer"}ag=aa.iframeHeight||V.offsetHeight}Z.editorContainer=aa.editorContainer}if(ai.content_css){I(n(ai.content_css),function(al){Z.contentCSS.push(Z.documentBaseURI.toAbsolute(al))})}if(ai.content_style){Z.contentStyles.push(ai.content_style)}if(ai.content_editable){V=ac=aa=null;return Z.initContentBody()}Z.iframeHTML=ai.doctype+"<html><head>";if(ai.document_base_url!=Z.documentBaseUrl){Z.iframeHTML+='<base href="'+Z.documentBaseURI.getURI()+'" />'}if(!L.caretAfter&&ai.ie7_compat){Z.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'}Z.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';if(!/#$/.test(document.location.href)){for(ae=0;ae<Z.contentCSS.length;ae++){var ad=Z.contentCSS[ae];Z.iframeHTML+=('<link type="text/css" rel="stylesheet" href="'+m._addCacheSuffix(ad)+'" />');Z.loadedCSS[ad]=true}}ak=ai.body_id||"tinymce";if(ak.indexOf("=")!=-1){ak=Z.getParam("body_id","","hash");ak=ak[Z.id]||ak}af=ai.body_class||"";if(af.indexOf("=")!=-1){af=Z.getParam("body_class","","hash");af=af[Z.id]||""}if(ai.content_security_policy){Z.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+ai.content_security_policy+'" />'}Z.iframeHTML+='</head><body id="'+ak+'" class="mce-content-body '+af+'" data-id="'+Z.id+'"><br></body></html>';var Y='javascript:(function(){document.open();document.domain="'+document.domain+'";variables ed = window.parent.tinymce.get("'+Z.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()';if(document.domain!=location.hostname){if(L.ie&&L.ie<12){S=Y}}var W=w.create("iframe",{id:Z.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:Z.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:ag,display:"block"}});W.onload=function(){W.onload=null;Z.fire("load")};w.setAttrib(W,"src",S||'javascript:""');Z.contentAreaContainer=aa.iframeContainer;Z.iframeElement=W;ac=w.add(aa.iframeContainer,W);if(C){try{Z.getDoc()}catch(ah){ac.src=S=Y}}if(aa.editorContainer){w.get(aa.editorContainer).style.display=Z.orgDisplay;Z.hidden=w.isHidden(aa.editorContainer)}Z.getElement().style.display="none";w.setAttrib(Z.id,"aria-hidden",true);if(!S){Z.initContentBody()}V=ac=aa=null},initContentBody:function(S){var T=this,U=T.settings,V=T.getElement(),W=T.getDoc(),R,X;if(!U.inline){T.getElement().style.visibility=T.orgVisibility}if(!S&&!U.content_editable){W.open();W.write(T.iframeHTML);W.close()}if(U.content_editable){T.on("remove",function(){var Y=this.getBody();w.removeClass(Y,"mce-content-body");w.removeClass(Y,"mce-edit-focus");w.setAttrib(Y,"contentEditable",null)});w.addClass(V,"mce-content-body");T.contentDocument=W=U.content_document||document;T.contentWindow=U.content_window||window;T.bodyElement=V;U.content_document=U.content_window=null;U.root_name=V.nodeName.toLowerCase()}R=T.getBody();R.disabled=true;T.readonly=U.readonly;if(!T.readonly){if(T.inline&&w.getStyle(R,"position",true)=="static"){R.style.position="relative"}R.contentEditable=T.getParam("content_editable_state",true)}R.disabled=false;T.editorUpload=new d(T);T.schema=new k(U);T.dom=new Q(W,{keep_values:true,url_converter:T.convertURL,url_converter_scope:T,hex_colors:U.force_hex_style_colors,class_filter:U.class_filter,update_styles:true,root_element:T.inline?T.getBody():null,collect:U.content_editable,schema:T.schema,onSetAttrib:function(Y){T.fire("SetAttrib",Y)}});T.parser=new b(U,T.schema);T.parser.addAttributeFilter("src,href,style,tabindex",function(Y,Z){var aa=Y.length,ac,ae=T.dom,ad,ab;while(aa--){ac=Y[aa];ad=ac.attr(Z);ab="data-mce-"+Z;if(!ac.attributes.map[ab]){if(ad.indexOf("data:")===0||ad.indexOf("blob:")===0){continue}if(Z==="style"){ad=ae.serializeStyle(ae.parseStyle(ad),ac.name);if(!ad.length){ad=null}ac.attr(ab,ad);ac.attr(Z,ad)}else{if(Z==="tabindex"){ac.attr(ab,ad);ac.attr(Z,null)}else{ac.attr(ab,T.convertURL(ad,Z,ac.name))}}}}});T.parser.addNodeFilter("script",function(Y){var Z=Y.length,ab,aa;while(Z--){ab=Y[Z];aa=ab.attr("type")||"no/type";if(aa.indexOf("mce-")!==0){ab.attr("type","mce-"+aa)}}});T.parser.addNodeFilter("#cdata",function(Y){var Z=Y.length,aa;while(Z--){aa=Y[Z];aa.type=8;aa.name="#comment";aa.value="[CDATA["+aa.value+"]]"}});T.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(Z){var aa=Z.length,ab,Y=T.schema.getNonEmptyElements();while(aa--){ab=Z[aa];if(ab.isEmpty(Y)){ab.append(new u("br",1)).shortEnded=true}}});T.serializer=new H(U,T);T.selection=new B(T.dom,T.getWin(),T.serializer,T);T.formatter=new v(T);T.undoManager=new j(T);T.forceBlocks=new D(T);T.enterKey=new G(T);T._nodeChangeDispatcher=new i(T);T._selectionOverrides=new h(T);T.fire("PreInit");if(!U.browser_spellcheck&&!U.gecko_spellcheck){W.body.spellcheck=false;w.setAttrib(R,"spellcheck","false")}T.quirks=new y(T);T.fire("PostRender");if(U.directionality){R.dir=U.directionality}if(U.nowrap){R.style.whiteSpace="nowrap"}if(U.protect){T.on("BeforeSetContent",function(Y){I(U.protect,function(Z){Y.content=Y.content.replace(Z,function(aa){return"<!--mce:protected "+escape(aa)+"-->"})})})}T.on("SetContent",function(){T.addVisual(T.getBody())});if(U.padd_empty_editor){T.on("PostProcess",function(Y){Y.content=Y.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}T.load({initial:true,format:"html"});T.startContent=T.getContent({format:"raw"});T.initialized=true;T.bindPendingEventDelegates();T.fire("init");T.focus(true);T.nodeChanged({initial:true});T.execCallback("init_instance_callback",T);T.on("compositionstart compositionend",function(Y){T.composing=Y.type==="compositionstart"});if(T.contentStyles.length>0){X="";I(T.contentStyles,function(Y){X+=Y+"\r\n"});T.dom.addStyle(X)}I(T.contentCSS,function(Y){if(!T.loadedCSS[Y]){T.dom.loadCSS(Y);T.loadedCSS[Y]=true}});if(U.auto_focus){q.setEditorTimeout(T,function(){var Y;if(U.auto_focus===true){Y=T}else{Y=T.editorManager.get(U.auto_focus)}if(!Y.destroyed){Y.focus()}},100)}V=W=R=null},focus:function(S){var ab=this,aa=ab.selection,V=ab.settings.content_editable,R;var Y,Z=ab.getDoc(),T=ab.getBody(),W;function X(ac){return ab.dom.getParent(ac,function(ad){return ab.dom.getContentEditable(ad)==="true"})}if(!S){R=aa.getRng();if(R.item){Y=R.item(0)}ab.quirks.refreshContentEditable();W=X(aa.getNode());if(ab.$.contains(T,W)){W.focus();aa.normalize();ab.editorManager.setActive(ab);return}if(!V){if(!L.opera){ab.getBody().focus()}ab.getWin().focus()}if(g||V){if(T.setActive){try{T.setActive()}catch(U){T.focus()}}else{T.focus()}if(V){aa.normalize()}}if(Y&&Y.ownerDocument==Z){R=Z.body.createControlRange();R.addElement(Y);R.select()}}ab.editorManager.setActive(ab)},execCallback:function(S){var R=this,U=R.settings[S],T;if(!U){return}if(R.callbackLookup&&(T=R.callbackLookup[S])){U=T.func;T=T.scope}if(typeof U==="string"){T=U.replace(/\.\w+$/,"");T=T?r(T):0;U=r(U);R.callbackLookup=R.callbackLookup||{};R.callbackLookup[S]={func:U,scope:T}}return U.apply(T||R,Array.prototype.slice.call(arguments,1))},translate:function(T){var S=this.settings.language||"en",R=this.editorManager.i18n;if(!T){return""}T=R.data[S+"."+T]||T.replace(/\{\#([^\}]+)\}/g,function(V,U){return R.data[S+"."+U]||"{#"+U+"}"});return this.editorManager.translate(T)},getLang:function(R,S){return(this.editorManager.i18n.data[(this.settings.language||"en")+"."+R]||(S!==undefined?S:"{#"+R+"}"))},getParam:function(S,V,T){var U=S in this.settings?this.settings[S]:V,R;if(T==="hash"){R={};if(typeof U==="string"){I(U.indexOf("=")>0?U.split(/[;,](?![^=;,]*(?:[;,]|$))/):U.split(","),function(W){W=W.split("=");if(W.length>1){R[a(W[0])]=a(W[1])}else{R[a(W[0])]=a(W)}})}else{R=U}return R}return U},nodeChanged:function(R){this._nodeChangeDispatcher.nodeChanged(R)},addButton:function(S,T){var R=this;if(T.cmd){T.onclick=function(){R.execCommand(T.cmd)}}if(!T.text&&!T.icon){T.icon=S}R.buttons=R.buttons||{};T.tooltip=T.tooltip||T.title;R.buttons[S]=T},addMenuItem:function(S,T){var R=this;if(T.cmd){T.onclick=function(){R.execCommand(T.cmd)}}R.menuItems=R.menuItems||{};R.menuItems[S]=T},addContextToolbar:function(S,U){var T=this,R;T.contextToolbars=T.contextToolbars||[];if(typeof S=="string"){R=S;S=function(V){return T.dom.is(V,R)}}T.contextToolbars.push({id:c.uuid("mcet"),predicate:S,items:U})},addCommand:function(R,T,S){this.editorCommands.addCommand(R,T,S)},addQueryStateHandler:function(R,T,S){this.editorCommands.addQueryStateHandler(R,T,S)},addQueryValueHandler:function(R,T,S){this.editorCommands.addQueryValueHandler(R,T,S)},addShortcut:function(T,U,S,R){this.shortcuts.add(T,U,S,R)},execCommand:function(U,T,S,R){return this.editorCommands.execCommand(U,T,S,R)},queryCommandState:function(R){return this.editorCommands.queryCommandState(R)},queryCommandValue:function(R){return this.editorCommands.queryCommandValue(R)},queryCommandSupported:function(R){return this.editorCommands.queryCommandSupported(R)},show:function(){var R=this;if(R.hidden){R.hidden=false;if(R.inline){R.getBody().contentEditable=true}else{w.show(R.getContainer());w.hide(R.id)}R.load();R.fire("show")}},hide:function(){var R=this,S=R.getDoc();if(!R.hidden){if(C&&S&&!R.inline){S.execCommand("SelectAll")}R.save();if(R.inline){R.getBody().contentEditable=false;if(R==R.editorManager.focusedEditor){R.editorManager.focusedEditor=null}}else{w.hide(R.getContainer());w.setStyle(R.id,"display",R.orgDisplay)}R.hidden=true;R.fire("hide")}},isHidden:function(){return !!this.hidden},setProgressState:function(R,S){this.fire("ProgressState",{state:R,time:S})},load:function(S){var R=this,U=R.getElement(),T;if(U){S=S||{};S.load=true;T=R.setContent(U.value!==undefined?U.value:U.innerHTML,S);S.element=U;if(!S.no_events){R.fire("LoadContent",S)}S.element=U=null;return T}},save:function(S){var R=this,V=R.getElement(),T,U;if(!V||!R.initialized){return}S=S||{};S.save=true;S.element=V;T=S.content=R.getContent(S);if(!S.no_events){R.fire("SaveContent",S)}if(S.format=="raw"){R.fire("RawSaveContent",S)}T=S.content;if(!/TEXTAREA|INPUT/i.test(V.nodeName)){if(!R.inline){V.innerHTML=T}if((U=w.getParent(R.id,"form"))){I(U.elements,function(W){if(W.name==R.id){W.value=T;return false}})}}else{V.value=T}S.element=V=null;if(S.set_dirty!==false){R.setDirty(false)}return T},setContent:function(W,U){var T=this,R=T.getBody(),V,S;U=U||{};U.format=U.format||"html";U.set=true;U.content=W;if(!U.no_events){T.fire("BeforeSetContent",U)}W=U.content;if(W.length===0||/^\s+$/.test(W)){S=C&&C<11?"":'<br data-mce-bogus="1">';if(R.nodeName=="TABLE"){W="<tr><td>"+S+"</td></tr>"}else{if(/^(UL|OL)$/.test(R.nodeName)){W="<li>"+S+"</li>"}}V=T.settings.forced_root_block;if(V&&T.schema.isValidChild(R.nodeName.toLowerCase(),V.toLowerCase())){W=S;W=T.dom.createHTML(V,T.settings.forced_root_block_attrs,W)}else{if(!C&&!W){W='<br data-mce-bogus="1">'}}T.dom.setHTML(R,W);T.fire("SetContent",U)}else{if(U.format!=="raw"){W=new F({validate:T.validate},T.schema).serialize(T.parser.parse(W,{isRootContent:true}))}U.content=a(W);T.dom.setHTML(R,U.content);if(!U.no_events){T.fire("SetContent",U)}}return U.content},getContent:function(T){var S=this,U,R=S.getBody();T=T||{};T.format=T.format||"html";T.get=true;T.getInner=true;if(!T.no_events){S.fire("BeforeGetContent",T)}if(T.format=="raw"){U=S.serializer.getTrimmedContent()}else{if(T.format=="text"){U=R.innerText||R.textContent}else{U=S.serializer.serialize(R,T)}}if(T.format!="text"){T.content=a(U)}else{T.content=U}if(!T.no_events){S.fire("GetContent",T)}return T.content},insertContent:function(S,R){if(R){S=l({content:S},R)}this.execCommand("mceInsertContent",false,S)},isDirty:function(){return !this.isNotDirty},setDirty:function(S){var R=!this.isNotDirty;this.isNotDirty=!S;if(S&&S!=R){this.fire("dirty")}},setMode:function(R){e.setMode(this,R)},getContainer:function(){var R=this;if(!R.container){R.container=w.get(R.editorContainer||R.id+"_parent")}return R.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){if(!this.targetElm){this.targetElm=w.get(this.id)}return this.targetElm},getWin:function(){var R=this,S;if(!R.contentWindow){S=R.iframeElement;if(S){R.contentWindow=S.contentWindow}}return R.contentWindow},getDoc:function(){var R=this,S;if(!R.contentDocument){S=R.getWin();if(S){R.contentDocument=S.document}}return R.contentDocument},getBody:function(){var R=this.getDoc();return this.bodyElement||(R?R.body:null)},convertURL:function(T,S,V){var R=this,U=R.settings;if(U.urlconverter_callback){return R.execCallback("urlconverter_callback",T,V,true,S)}if(!U.convert_urls||(V&&V.nodeName=="LINK")||T.indexOf("file:")===0||T.length===0){return T}if(U.relative_urls){return R.documentBaseURI.toRelative(T)}T=R.documentBaseURI.toAbsolute(T,U.remove_script_host);return T},addVisual:function(V){var S=this,T=S.settings,U=S.dom,R;V=V||S.getBody();if(S.hasVisual===undefined){S.hasVisual=T.visual}I(U.select("table,a",V),function(X){var W;switch(X.nodeName){case"TABLE":R=T.visual_table_class||"mce-item-table";W=U.getAttrib(X,"border");if((!W||W=="0")&&S.hasVisual){U.addClass(X,R)}else{U.removeClass(X,R)}return;case"A":if(!U.getAttrib(X,"href",false)){W=U.getAttrib(X,"name")||X.id;R=T.visual_anchor_class||"mce-item-anchor";if(W&&S.hasVisual){U.addClass(X,R)}else{U.removeClass(X,R)}}return}});S.fire("VisualAid",{element:V,hasVisual:S.hasVisual})},remove:function(){var R=this;if(!R.removed){R.save();R.removed=1;R.unbindAllNativeEvents();if(R.hasHiddenInput){w.remove(R.getElement().nextSibling)}if(!R.inline){if(C&&C<10){R.getDoc().execCommand("SelectAll",false,null)}w.setStyle(R.id,"display",R.orgDisplay);R.getBody().onload=null}R.fire("remove");R.editorManager.remove(R);w.remove(R.getContainer());R._selectionOverrides.destroy();R.editorUpload.destroy();R.destroy()}},destroy:function(T){var R=this,S;if(R.destroyed){return}if(!T&&!R.removed){R.remove();return}if(!T){R.editorManager.off("beforeunload",R._beforeUnload);if(R.theme&&R.theme.destroy){R.theme.destroy()}R.selection.destroy();R.dom.destroy()}S=R.formElement;if(S){if(S._mceOldSubmit){S.submit=S._mceOldSubmit;S._mceOldSubmit=null}w.unbind(S,"submit reset",R.formEventDelegate)}R.contentAreaContainer=R.formElement=R.container=R.editorContainer=null;R.bodyElement=R.contentDocument=R.contentWindow=null;R.iframeElement=R.targetElm=null;if(R.selection){R.selection=R.selection.win=R.selection.dom=R.selection.dom.doc=null}R.destroyed=1},uploadImages:function(R){return this.editorUpload.uploadImages(R)},_scanForImages:function(){return this.editorUpload.scanForImages()}};l(t.prototype,f);return t});