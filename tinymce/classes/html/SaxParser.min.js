define("tinymce/html/SaxParser",["tinymce/html/Schema","tinymce/html/Entities","tinymce/util/Tools"],function(d,f,c){var e=c.each;function b(k,i,n){var j=1,g,m,l,h;h=k.getShortEndedElements();l=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g;l.lastIndex=g=n;while((m=l.exec(i))){g=l.lastIndex;if(m[1]==="/"){j--}else{if(!m[1]){if(m[2] in h){continue}j++}}if(j===0){break}}return g}function a(h,j){var g=this;function i(){}h=h||{};g.schema=j=j||new d();if(h.fix_self_closing!==false){h.fix_self_closing=true}e("comment cdata text start end pi doctype".split(" "),function(k){if(k){g[k]=h[k]||i}});g.parse=function(H){var t=this,l,J=0,M,E,D=[],R,U,F,v;var C,w,Q,K,S;var z,s,p,x,W,T,I;var X,P,k;var V,N,q,G,O,m,A=0;var o=f.decode,B,L=c.makeMap("src,href,data,background,formaction,poster");var n=/((java|vb)script|mhtml):/i,r=/^data:/i;function y(Y){var aa,Z;aa=D.length;while(aa--){if(D[aa].name===Y){break}}if(aa>=0){for(Z=D.length-1;Z>=aa;Z--){Y=D[Z];if(Y.valid){t.end(Y.name)}}D.length=aa}}function u(ad,Z,ah,af,ae){var ab,ac,Y=/[\s\u0000-\u001F]+/g;Z=Z.toLowerCase();ah=Z in K?Z:o(ah||af||ae||"");if(z&&!C&&Z.indexOf("data-")!==0){ab=T[Z];if(!ab&&I){ac=I.length;while(ac--){ab=I[ac];if(ab.pattern.test(Z)){break}}if(ac===-1){ab=null}}if(!ab){return}if(ab.validValues&&!(ah in ab.validValues)){return}}if(L[Z]&&!h.allow_script_urls){var aa=ah.replace(Y,"");try{aa=decodeURIComponent(aa)}catch(ag){aa=unescape(aa)}if(n.test(aa)){return}if(!h.allow_html_data_urls&&r.test(aa)&&!/^data:image\//i.test(aa)){return}}R.map[Z]=ah;R.push({name:Z,value:ah})}q=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g");G=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g;Q=j.getShortEndedElements();N=h.self_closing_elements||j.getSelfClosingElements();K=j.getBoolAttrs();z=h.validate;w=h.remove_internals;B=h.fix_self_closing;O=j.getSpecialElements();while((l=q.exec(H))){if(J<l.index){t.text(o(H.substr(J,l.index-J)))}if((M=l[6])){M=M.toLowerCase();if(M.charAt(0)===":"){M=M.substr(1)}y(M)}else{if((M=l[7])){M=M.toLowerCase();if(M.charAt(0)===":"){M=M.substr(1)}S=M in Q;if(B&&N[M]&&D.length>0&&D[D.length-1].name===M){y(M)}if(!z||(s=j.getElementRule(M))){p=true;if(z){T=s.attributes;I=s.attributePatterns}if((W=l[8])){C=W.indexOf("data-mce-type")!==-1;if(C&&w){p=false}R=[];R.map={};W.replace(G,u)}else{R=[];R.map={}}if(z&&!C){X=s.attributesRequired;P=s.attributesDefault;k=s.attributesForced;V=s.removeEmptyAttrs;if(V&&!R.length){p=false}if(k){U=k.length;while(U--){x=k[U];v=x.name;m=x.value;if(m==="{$uid}"){m="mce_"+A++}R.map[v]=m;R.push({name:v,value:m})}}if(P){U=P.length;while(U--){x=P[U];v=x.name;if(!(v in R.map)){m=x.value;if(m==="{$uid}"){m="mce_"+A++}R.map[v]=m;R.push({name:v,value:m})}}}if(X){U=X.length;while(U--){if(X[U] in R.map){break}}if(U===-1){p=false}}if((x=R.map["data-mce-bogus"])){if(x==="all"){J=b(j,H,q.lastIndex);q.lastIndex=J;continue}p=false}}if(p){t.start(M,R,S)}}else{p=false}if((E=O[M])){E.lastIndex=J=l.index+l[0].length;if((l=E.exec(H))){if(p){F=H.substr(J,l.index-J)}J=l.index+l[0].length}else{F=H.substr(J);J=H.length}if(p){if(F.length>0){t.text(F,true)}t.end(M)}q.lastIndex=J;continue}if(!S){if(!W||W.indexOf("/")!=W.length-1){D.push({name:M,valid:p})}else{if(p){t.end(M)}}}}else{if((M=l[1])){if(M.charAt(0)===">"){M=" "+M}if(!h.allow_conditional_comments&&M.substr(0,3)==="[if"){M=" "+M}t.comment(M)}else{if((M=l[2])){t.cdata(M)}else{if((M=l[3])){t.doctype(M)}else{if((M=l[4])){t.pi(M,l[5])}}}}}}J=l.index+l[0].length}if(J<H.length){t.text(o(H.substr(J)))}for(U=D.length-1;U>=0;U--){M=D[U];if(M.valid){t.end(M.name)}}}}a.findEndTag=b;return a});