define("tinymce/html/Schema",["tinymce/util/Tools"],function(b){var c={},e={};var d=b.makeMap,i=b.each,f=b.extend,h=b.explode,k=b.inArray;function g(l,m){return l?l.split(m||" "):[]}function j(s){var p={},t,m;var q,r,l,o;function u(y,v,B){var A,z,C,x=arguments;function w(H,G){var F={},E,D;for(E=0,D=H.length;E<D;E++){F[H[E]]=G||{}}return F}B=B||[];v=v||"";if(typeof B==="string"){B=g(B)}for(z=3;z<x.length;z++){if(typeof x[z]==="string"){x[z]=g(x[z])}B.push.apply(B,x[z])}y=g(y);A=y.length;while(A--){C=[].concat(t,g(v));p[y[A]]={attributes:w(C),attributesOrder:C,children:w(B,e)}}}function n(y,x){var A,w,z,v;y=g(y);A=y.length;x=g(x);while(A--){w=p[y[A]];for(z=0,v=x.length;z<v;z++){w.attributes[x[z]]={};w.attributesOrder.push(x[z])}}}if(c[s]){return c[s]}t=g("id accesskey class dir lang style tabindex title");m=g("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul");q=g("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u variables #text #comment");if(s!="html4"){t.push.apply(t,g("contenteditable contextmenu draggable dropzone hidden spellcheck translate"));m.push.apply(m,g("article aside details dialog figure header footer hgroup section nav"));q.push.apply(q,g("audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"))}if(s!="html5-strict"){t.push("xml:lang");o=g("acronym applet basefont big font strike tt");q.push.apply(q,o);i(o,function(v){u(v,"",q)});l=g("center dir isindex noframes");m.push.apply(m,l);r=[].concat(m,q);i(l,function(v){u(v,"",r)})}r=r||[].concat(m,q);u("html","manifest","head body");u("head","","base command link meta noscript script style title");u("title hr noscript br");u("base","href target");u("link","href rel media hreflang type sizes hreflang");u("meta","name http-equiv content charset");u("style","media type scoped");u("script","src async defer type charset");u("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r);u("address dt dd div caption","",r);u("h1 h2 h3 h4 h5 h6 pre p abbr code variables samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",q);u("blockquote","cite",r);u("ol","reversed start type","li");u("ul","","li");u("li","value",r);u("dl","","dt dd");u("a","href target rel media hreflang type",q);u("q","cite",q);u("ins del","cite datetime",r);u("img","src sizes srcset alt usemap ismap width height");u("iframe","src name width height",r);u("embed","src type width height");u("object","data type typemustmatch name usemap form width height",r,"param");u("param","name value");u("map","name",r,"area");u("area","alt coords shape href target rel media hreflang type");u("table","border","caption colgroup thead tfoot tbody tr"+(s=="html4"?" col":""));u("colgroup","span","col");u("col","span");u("tbody thead tfoot","","tr");u("tr","","td th");u("td","colspan rowspan headers",r);u("th","colspan rowspan headers scope abbr",r);u("form","accept-charset action autocomplete enctype method name novalidate target",r);u("fieldset","disabled form name",r,"legend");u("label","form for",q);u("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width");u("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",s=="html4"?r:q);u("select","disabled form multiple name required size","option optgroup");u("optgroup","disabled label","option");u("option","disabled label selected value");u("textarea","cols dirname disabled form maxlength name readonly required rows wrap");u("menu","type label",r,"li");u("noscript","",r);if(s!="html4"){u("wbr");u("ruby","",q,"rt rp");u("figcaption","",r);u("mark rt rp summary bdi","",q);u("canvas","width height",r);u("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",r,"track source");u("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",r,"track source");u("picture","","img source");u("source","src srcset type media sizes");u("track","kind src srclang label default");u("datalist","",q,"option");u("article section nav aside header footer","",r);u("hgroup","","h1 h2 h3 h4 h5 h6");u("figure","",r,"figcaption");u("time","datetime",q);u("dialog","open",r);u("command","type label icon disabled checked radiogroup command");u("output","for form name",q);u("progress","value max",q);u("meter","value min max low high optimum",q);u("details","open",r,"summary");u("keygen","autofocus challenge disabled form keytype name")}if(s!="html5-strict"){n("script","language xml:space");n("style","xml:space");n("object","declare classid code codebase codetype archive standby align border hspace vspace");n("embed","align name hspace vspace");n("param","valuetype type");n("a","charset name rev shape coords");n("br","clear");n("applet","codebase archive code object alt name width height align hspace vspace");n("img","name longdesc align border hspace vspace");n("iframe","longdesc frameborder marginwidth marginheight scrolling align");n("font basefont","size color face");n("input","usemap align");n("select","onchange");n("textarea");n("h1 h2 h3 h4 h5 h6 div p legend caption","align");n("ul","type compact");n("li","type");n("ol dl menu dir","compact");n("pre","width xml:space");n("hr","align noshade size width");n("isindex","prompt");n("table","summary width frame rules cellspacing cellpadding align bgcolor");n("col","width align char charoff valign");n("colgroup","width align char charoff valign");n("thead","align char charoff valign");n("tr","align char charoff valign bgcolor");n("th","axis align char charoff valign nowrap bgcolor width height");n("form","accept");n("td","abbr axis scope align char charoff valign nowrap bgcolor width height");n("tfoot","align char charoff valign");n("tbody","align char charoff valign");n("area","nohref");n("body","background bgcolor text link vlink alink")}if(s!="html4"){n("input button select textarea","autofocus");n("input textarea","placeholder");n("a","download");n("link script img","crossorigin");n("iframe","sandbox seamless allowfullscreen")}i(g("a form meter progress dfn"),function(v){if(p[v]){delete p[v].children[v]}});delete p.caption.children.table;delete p.script;c[s]=p;return p}function a(m,n){var l;if(m){l={};if(typeof m=="string"){m={"*":m}}i(m,function(p,o){l[o]=l[o.toUpperCase()]=n=="map"?d(p,/[, ]/):h(p,/[, ]/)})}return l}return function(H){var C=this,A={},p={},o=[],L,l,F;var v,x,G,y,z;var D,u,t,m,K;var w={},q={};function s(O,M,N){var P=H[O];if(!P){P=c[O];if(!P){P=d(M," ",d(M.toUpperCase()," "));P=f(P,N);c[O]=P}}else{P=d(P,/[, ]/,d(P.toUpperCase(),/[, ]/))}return P}H=H||{};F=j(H.schema);if(H.verify_html===false){H.valid_elements="*[*]"}L=a(H.valid_styles);l=a(H.invalid_styles,"map");z=a(H.valid_classes,"map");v=s("whitespace_elements","pre script noscript style textarea video audio iframe object");x=s("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");G=s("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track");y=s("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");u=s("non_empty_elements","td th iframe video audio object script",G);t=s("move_caret_before_on_enter_elements","table",u);m=s("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure");D=s("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",m);K=s("text_inline_elements","span strong b em i font strike u variables cite dfn code mark q sup sub samp");i((H.special||"script noscript style textarea").split(" "),function(M){q[M]=new RegExp("</"+M+"[^>]*>","gi")});function n(M){return new RegExp("^"+M.replace(/([?+*])/g,".$1")+"$")}function J(Y){var S,O,ag,ac,N,Q,ab,ae,W,af,ah,V,R,ad,M,Z,P,aj,aa,U=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,X=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,T=/[*?+]/;if(Y){Y=g(Y,",");if(A["@"]){Z=A["@"].attributes;P=A["@"].attributesOrder}for(S=0,O=Y.length;S<O;S++){N=U.exec(Y[S]);if(N){ad=N[1];W=N[2];M=N[3];ae=N[5];V={};R=[];Q={attributes:V,attributesOrder:R};if(ad==="#"){Q.paddEmpty=true}if(ad==="-"){Q.removeEmpty=true}if(N[4]==="!"){Q.removeEmptyAttrs=true}if(Z){for(aj in Z){V[aj]=Z[aj]}R.push.apply(R,P)}if(ae){ae=g(ae,"|");for(ag=0,ac=ae.length;ag<ac;ag++){N=X.exec(ae[ag]);if(N){ab={};ah=N[1];af=N[2].replace(/::/g,":");ad=N[3];aa=N[4];if(ah==="!"){Q.attributesRequired=Q.attributesRequired||[];Q.attributesRequired.push(af);ab.required=true}if(ah==="-"){delete V[af];R.splice(k(R,af),1);continue}if(ad){if(ad==="="){Q.attributesDefault=Q.attributesDefault||[];Q.attributesDefault.push({name:af,value:aa});ab.defaultValue=aa}if(ad===":"){Q.attributesForced=Q.attributesForced||[];Q.attributesForced.push({name:af,value:aa});ab.forcedValue=aa}if(ad==="<"){ab.validValues=d(aa,"?")}}if(T.test(af)){Q.attributePatterns=Q.attributePatterns||[];ab.pattern=n(af);Q.attributePatterns.push(ab)}else{if(!V[af]){R.push(af)}V[af]=ab}}}}if(!Z&&W=="@"){Z=V;P=R}if(M){Q.outputName=W;A[M]=Q}if(T.test(W)){Q.pattern=n(W);o.push(Q)}else{A[W]=Q}}}}}function B(M){A={};o=[];J(M);i(F,function(O,N){p[N]=O.children})}function r(N){var M=/^(~)?(.+)$/;if(N){c.text_block_elements=c.block_elements=null;i(g(N,","),function(S){var Q=M.exec(S),R=Q[1]==="~",T=R?"span":"div",P=Q[2];p[P]=p[T];w[P]=T;if(!R){D[P.toUpperCase()]={};D[P]={}}if(!A[P]){var O=A[T];O=f({},O);delete O.removeEmptyAttrs;delete O.removeEmpty;A[P]=O}i(p,function(U,V){if(U[T]){p[V]=U=f({},p[V]);U[P]=U[T]}})})}}function E(M){var N=/^([+\-]?)(\w+)\[([^\]]+)\]$/;c[H.schema]=null;if(M){i(g(M,","),function(R){var Q=N.exec(R),O,P;if(Q){P=Q[1];if(P){O=p[Q[2]]}else{O=p[Q[2]]={"#comment":{}}}O=p[Q[2]];i(g(Q[3],"|"),function(S){if(P==="-"){delete O[S]}else{O[S]={}}})}})}}function I(M){var O=A[M],N;if(O){return O}N=o.length;while(N--){O=o[N];if(O.pattern.test(M)){return O}}}if(!H.valid_elements){i(F,function(N,M){A[M]={attributes:N.attributes,attributesOrder:N.attributesOrder};p[M]=N.children});if(H.schema!="html5"){i(g("strong/b em/i"),function(M){M=g(M,"/");A[M[1]].outputName=M[0]})}i(g("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(M){if(A[M]){A[M].removeEmpty=true}});i(g("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(M){A[M].paddEmpty=true});i(g("span"),function(M){A[M].removeEmptyAttrs=true})}else{B(H.valid_elements)}r(H.custom_elements);E(H.valid_children);J(H.extended_valid_elements);E("+ol[ul|ol],+ul[ul|ol]");if(H.invalid_elements){i(h(H.invalid_elements),function(M){if(A[M]){delete A[M]}})}if(!I("span")){J("span[!data-mce-type|*]")}C.children=p;C.getValidStyles=function(){return L};C.getInvalidStyles=function(){return l};C.getValidClasses=function(){return z};C.getBoolAttrs=function(){return y};C.getBlockElements=function(){return D};C.getTextBlockElements=function(){return m};C.getTextInlineElements=function(){return K};C.getShortEndedElements=function(){return G};C.getSelfClosingElements=function(){return x};C.getNonEmptyElements=function(){return u};C.getMoveCaretBeforeOnEnterElements=function(){return t};C.getWhiteSpaceElements=function(){return v};C.getSpecialElements=function(){return q};C.isValidChild=function(M,O){var N=p[M];return !!(N&&N[O])};C.isValid=function(N,M){var P,O,Q=I(N);if(Q){if(M){if(Q.attributes[M]){return true}P=Q.attributePatterns;if(P){O=P.length;while(O--){if(P[O].pattern.test(N)){return true}}}}else{return true}}return false};C.getElementRule=I;C.getCustomElements=function(){return w};C.addValidElements=J;C.setValidElements=B;C.addCustomElements=r;C.addValidChildren=E;C.elements=A}});