define("tinymce/dom/DOMUtils",["tinymce/dom/Sizzle","tinymce/dom/DomQuery","tinymce/html/Styles","tinymce/dom/EventUtils","tinymce/dom/TreeWalker","tinymce/dom/Range","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools","tinymce/dom/StyleSheetLoader"],function(c,g,j,f,h,t,d,b,a,n){var e=a.each,i=a.is,l=a.grep,p=a.trim;var o=b.ie;var m=/^([a-z0-9],?)+$/i;var u=/^[ \t\r\n]*$/;function r(w,y){var x={},v=y.keep_values,z;z={set:function(A,C,B){if(y.url_converter){C=y.url_converter.call(y.url_converter_scope||w,C,B,A[0])}A.attr("data-mce-"+B,C).attr(B,C)},get:function(A,B){return A.attr("data-mce-"+B)||A.attr(B)}};x={style:{set:function(A,B){if(B!==null&&typeof B==="object"){A.css(B);return}if(v){A.attr("data-mce-style",B)}A.attr("style",B)},get:function(A){var B=A.attr("data-mce-style")||A.attr("style");B=w.serializeStyle(w.parseStyle(B),A[0].nodeName);return B}}};if(v){x.href=x.src=z}return x}function k(v,w){var x=w.attr("style");x=v.serializeStyle(v.parseStyle(x),w[0].nodeName);if(!x){x=null}w.attr("data-mce-style",x)}function q(y,z){var v=0,x,w;if(y){for(x=y.nodeType,y=y.previousSibling;y;y=y.previousSibling){w=y.nodeType;if(z&&w==3){if(w==x||!y.nodeValue.length){continue}}v++;x=w}}return v}function s(y,w){var v=this,x;v.doc=y;v.win=window;v.files={};v.counter=0;v.stdMode=!o||y.documentMode>=8;v.boxModel=!o||y.compatMode=="CSS1Compat"||v.stdMode;v.styleSheetLoader=new n(y);v.boundEvents=[];v.settings=w=w||{};v.schema=w.schema;v.styles=new j({url_converter:w.url_converter,url_converter_scope:w.url_converter_scope},w.schema);v.fixDoc(y);v.events=w.ownEvents?new f(w.proxy):f.Event;v.attrHooks=r(v,w);x=w.schema?w.schema.getBlockElements():{};v.$=g.overrideDefaults(function(){return{context:y,element:v.getRoot()}});v.isBlock=function(A){if(!A){return false}var z=A.nodeType;if(z){return !!(z===1&&x[A.nodeName])}return !!x[A]}}s.prototype={$$:function(v){if(typeof v=="string"){v=this.get(v)}return this.$(v)},root:null,fixDoc:function(x){var w=this.settings,v;if(o&&w.schema){("abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video").replace(/\w+/g,function(y){x.createElement(y)});for(v in w.schema.getCustomElements()){x.createElement(v)}}},clone:function(x,v){var w=this,z,y;if(!o||x.nodeType!==1||v){return x.cloneNode(v)}y=w.doc;if(!v){z=y.createElement(x.nodeName);e(w.getAttribs(x),function(A){w.setAttrib(z,A.nodeName,w.getAttrib(x,A.nodeName))});return z}return z.firstChild},getRoot:function(){var v=this;return v.settings.root_element||v.doc.body},getViewPort:function(w){var v,x;w=!w?this.win:w;v=w.document;x=this.boxModel?v.documentElement:v.body;return{x:w.pageXOffset||x.scrollLeft,y:w.pageYOffset||x.scrollTop,w:w.innerWidth||x.clientWidth,h:w.innerHeight||x.clientHeight}},getRect:function(y){var v=this,x,w;y=v.get(y);x=v.getPos(y);w=v.getSize(y);return{x:x.x,y:x.y,w:w.w,h:w.h}},getSize:function(z){var x=this,v,y;z=x.get(z);v=x.getStyle(z,"width");y=x.getStyle(z,"height");if(v.indexOf("px")===-1){v=0}if(y.indexOf("px")===-1){y=0}return{w:parseInt(v,10)||z.offsetWidth||z.clientWidth,h:parseInt(y,10)||z.offsetHeight||z.clientHeight}},getParent:function(x,v,w){return this.getParents(x,v,w,false)},getParents:function(A,w,x,B){var z=this,y,v=[];A=z.get(A);B=B===undefined;x=x||(z.getRoot().nodeName!="BODY"?z.getRoot().parentNode:null);if(i(w,"string")){y=w;if(w==="*"){w=function(C){return C.nodeType==1}}else{w=function(C){return z.is(C,y)}}}while(A){if(A==x||!A.nodeType||A.nodeType===9){break}if(!w||w(A)){if(B){v.push(A)}else{return A}}A=A.parentNode}return B?v:null},get:function(w){var v;if(w&&this.doc&&typeof w=="string"){v=w;w=this.doc.getElementById(w);if(w&&w.id!==v){return this.doc.getElementsByName(v)[1]}}return w},getNext:function(w,v){return this._findSib(w,v,"nextSibling")},getPrev:function(w,v){return this._findSib(w,v,"previousSibling")},select:function(v,x){var w=this;return c(v,w.get(x)||w.settings.root_element||w.doc,[])},is:function(y,v){var w;if(y.length===undefined){if(v==="*"){return y.nodeType==1}if(m.test(v)){v=v.toLowerCase().split(/,/);y=y.nodeName.toLowerCase();for(w=v.length-1;w>=0;w--){if(v[w]==y){return true}}return false}}if(y.nodeType&&y.nodeType!=1){return false}var x=y.nodeType?[y]:y;return c(v,x[0].ownerDocument||x[0],null,x).length>0},add:function(A,x,w,z,y){var v=this;return this.run(A,function(C){var B;B=i(x,"string")?v.doc.createElement(x):x;v.setAttribs(B,w);if(z){if(z.nodeType){B.appendChild(z)}else{v.setHTML(B,z)}}return !y?C.appendChild(B):B})},create:function(w,v,x){return this.add(this.doc.createElement(w),w,v,x,1)},createHTML:function(w,v,y){var z="",x;z+="<"+w;for(x in v){if(v.hasOwnProperty(x)&&v[x]!==null&&typeof v[x]!="undefined"){z+=" "+x+'="'+this.encode(v[x])+'"'}}if(typeof y!="undefined"){return z+">"+y+"</"+w+">"}return z+" />"},createFragment:function(w){var z,x,y=this.doc,v;v=y.createElement("div");z=y.createDocumentFragment();if(w){v.innerHTML=w}while((x=v.firstChild)){z.appendChild(x)}return z},remove:function(v,w){v=this.$$(v);if(w){v.each(function(){var x;while((x=this.firstChild)){if(x.nodeType==3&&x.data.length===0){this.removeChild(x)}else{this.parentNode.insertBefore(x,this)}}}).remove()}else{v.remove()}return v.length>1?v.toArray():v[0]},setStyle:function(x,v,w){x=this.$$(x).css(v,w);if(this.settings.update_styles){k(this,x)}},getStyle:function(x,v,w){x=this.$$(x);if(w){return x.css(v)}v=v.replace(/-(\D)/g,function(z,y){return y.toUpperCase()});if(v=="float"){v=b.ie&&b.ie<12?"styleFloat":"cssFloat"}return x[0]&&x[0].style?x[0].style[v]:undefined},setStyles:function(w,v){w=this.$$(w).css(v);if(this.settings.update_styles){k(this,w)}},removeAllAttribs:function(v){return this.run(v,function(y){var x,w=y.attributes;for(x=w.length-1;x>=0;x--){y.removeAttributeNode(w.item(x))}})},setAttrib:function(B,x,A){var w=this,v,z,y=w.settings;if(A===""){A=null}B=w.$$(B);v=B.attr(x);if(!B.length){return}z=w.attrHooks[x];if(z&&z.set){z.set(B,A,x)}else{B.attr(x,A)}if(v!=A&&y.onSetAttrib){y.onSetAttrib({attrElm:B,attrName:x,attrValue:A})}},setAttribs:function(x,w){var v=this;v.$$(x).each(function(y,z){e(w,function(B,A){v.setAttrib(z,A,B)})})},getAttrib:function(A,w,z){var v=this,y,x;A=v.$$(A);if(A.length){y=v.attrHooks[w];if(y&&y.get){x=y.get(A,w)}else{x=A.attr(w)}}if(typeof x=="undefined"){x=z||""}return x},getPos:function(z,A){var F=this,D=0,C=0,v,E=F.doc,w=E.body,B;z=F.get(z);A=A||w;if(z){if(A===w&&z.getBoundingClientRect&&g(w).css("position")==="static"){B=z.getBoundingClientRect();A=F.boxModel?E.documentElement:w;D=B.left+(E.documentElement.scrollLeft||w.scrollLeft)-A.clientLeft;C=B.top+(E.documentElement.scrollTop||w.scrollTop)-A.clientTop;return{x:D,y:C}}v=z;while(v&&v!=A&&v.nodeType){D+=v.offsetLeft||0;C+=v.offsetTop||0;v=v.offsetParent}v=z.parentNode;while(v&&v!=A&&v.nodeType){D-=v.scrollLeft||0;C-=v.scrollTop||0;v=v.parentNode}}return{x:D,y:C}},parseStyle:function(v){return this.styles.parse(v)},serializeStyle:function(w,v){return this.styles.serialize(w,v)},addStyle:function(y){var w=this,z=w.doc,x,A;if(w!==s.DOM&&z===document){var v=s.DOM.addedStyles;v=v||[];if(v[y]){return}v[y]=true;s.DOM.addedStyles=v}A=z.getElementById("mceDefaultStyles");if(!A){A=z.createElement("style");A.id="mceDefaultStyles";A.type="text/css";x=z.getElementsByTagName("head")[0];if(x.firstChild){x.insertBefore(A,x.firstChild)}else{x.appendChild(A)}}if(A.styleSheet){A.styleSheet.cssText+=y}else{A.appendChild(z.createTextNode(y))}},loadCSS:function(w){var v=this,y=v.doc,x;if(v!==s.DOM&&y===document){s.DOM.loadCSS(w);return}if(!w){w=""}x=y.getElementsByTagName("head")[0];e(w.split(","),function(z){var A;z=a._addCacheSuffix(z);if(v.files[z]){return}v.files[z]=true;A=v.create("link",{rel:"stylesheet",href:z});if(o&&y.documentMode&&y.recalc){A.onload=function(){if(y.recalc){y.recalc()}A.onload=null}}x.appendChild(A)})},addClass:function(w,v){this.$$(w).addClass(v)},removeClass:function(w,v){this.toggleClass(w,v,false)},hasClass:function(w,v){return this.$$(w).hasClass(v)},toggleClass:function(x,v,w){this.$$(x).toggleClass(v,w).each(function(){if(this.className===""){g(this).attr("class",null)}})},show:function(v){this.$$(v).show()},hide:function(v){this.$$(v).hide()},isHidden:function(v){return this.$$(v).css("display")=="none"},uniqueId:function(v){return(!v?"mce_":v)+(this.counter++)},setHTML:function(w,v){w=this.$$(w);if(o){w.each(function(y,z){if(z.canHaveHTML===false){return}while(z.firstChild){z.removeChild(z.firstChild)}try{z.innerHTML="<br>"+v;z.removeChild(z.firstChild)}catch(x){g("<div>").html("<br>"+v).contents().slice(1).appendTo(z)}return v})}else{w.html(v)}},getOuterHTML:function(v){v=this.get(v);return v.nodeType==1&&"outerHTML" in v?v.outerHTML:g("<div>").append(g(v).clone()).html()},setOuterHTML:function(x,w){var v=this;v.$$(x).each(function(){try{if("outerHTML" in this){this.outerHTML=w;return}}catch(y){}v.remove(g(this).html(w),true)})},decode:d.decode,encode:d.encodeAllRaw,insertAfter:function(w,v){v=this.get(v);return this.run(w,function(y){var x,z;x=v.parentNode;z=v.nextSibling;if(z){x.insertBefore(y,z)}else{x.appendChild(y)}return y})},replace:function(x,w,y){var v=this;return v.run(w,function(z){if(i(z,"array")){x=x.cloneNode(true)}if(y){e(l(z.childNodes),function(A){x.appendChild(A)})}return z.parentNode.replaceChild(x,z)})},rename:function(y,w){var v=this,x;if(y.nodeName!=w.toUpperCase()){x=v.create(w);e(v.getAttribs(y),function(z){v.setAttrib(x,z.nodeName,v.getAttrib(y,z.nodeName))});v.replace(x,y,1)}return x||y},findCommonAncestor:function(x,v){var y=x,w;while(y){w=v;while(w&&y!=w){w=w.parentNode}if(y==w){break}y=y.parentNode}if(!y&&x.ownerDocument){return x.ownerDocument.documentElement}return y},toHex:function(v){return this.styles.toHex(a.trim(v))},run:function(z,y,x){var w=this,v;if(typeof z==="string"){z=w.get(z)}if(!z){return false}x=x||this;if(!z.nodeType&&(z.length||z.length===0)){v=[];e(z,function(B,A){if(B){if(typeof B=="string"){B=w.get(B)}v.push(y.call(x,B,A))}});return v}return y.call(x,z)},getAttribs:function(x){var v;x=this.get(x);if(!x){return[]}if(o){v=[];if(x.nodeName=="OBJECT"){return x.attributes}if(x.nodeName==="OPTION"&&this.getAttrib(x,"selected")){v.push({specified:1,nodeName:"selected"})}var w=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;x.cloneNode(false).outerHTML.replace(w,"").replace(/[\w:\-]+/gi,function(y){v.push({specified:1,nodeName:y})});return v}return x.attributes},isEmpty:function(y,w){var D=this,A,z,C,v,x,B=0;y=y.firstChild;if(y){v=new h(y,y.parentNode);w=w||(D.schema?D.schema.getNonEmptyElements():null);do{C=y.nodeType;if(C===1){if(y.getAttribute("data-mce-bogus")){continue}x=y.nodeName.toLowerCase();if(w&&w[x]){if(x==="br"){B++;continue}return false}z=D.getAttribs(y);A=z.length;while(A--){x=z[A].nodeName;if(x==="name"||x==="data-mce-bookmark"){return false}}}if(C==8){return false}if((C===3&&!u.test(y.nodeValue))){return false}}while((y=v.next()))}return B<=1},createRng:function(){var v=this.doc;return v.createRange?v.createRange():new t(this)},nodeIndex:q,split:function(z,A,w){var D=this,v=D.createRng(),B,y,C;function x(I){var G,F=I.childNodes,H=I.nodeType;function J(M){var L=M.previousSibling&&M.previousSibling.nodeName=="SPAN";var K=M.nextSibling&&M.nextSibling.nodeName=="SPAN";return L&&K}if(H==1&&I.getAttribute("data-mce-type")=="bookmark"){return}for(G=F.length-1;G>=0;G--){x(F[G])}if(H!=9){if(H==3&&I.nodeValue.length>0){var E=p(I.nodeValue).length;if(!D.isBlock(I.parentNode)||E>0||E===0&&J(I)){return}}else{if(H==1){F=I.childNodes;if(F.length==1&&F[0]&&F[0].nodeType==1&&F[0].getAttribute("data-mce-type")=="bookmark"){I.parentNode.insertBefore(F[0],I)}if(F.length||/^(br|hr|input|img)$/i.test(I.nodeName)){return}}}D.remove(I)}return I}if(z&&A){v.setStart(z.parentNode,D.nodeIndex(z));v.setEnd(A.parentNode,D.nodeIndex(A));B=v.extractContents();v=D.createRng();v.setStart(A.parentNode,D.nodeIndex(A)+1);v.setEnd(z.parentNode,D.nodeIndex(z)+1);y=v.extractContents();C=z.parentNode;C.insertBefore(x(B),z);if(w){C.insertBefore(w,z)}else{C.insertBefore(A,z)}C.insertBefore(x(y),z);D.remove(z);return w||A}},bind:function(A,w,z,y){var v=this;if(a.isArray(A)){var x=A.length;while(x--){A[x]=v.bind(A[x],w,z,y)}return A}if(v.settings.collect&&(A===v.doc||A===v.win)){v.boundEvents.push([A,w,z,y])}return v.events.bind(A,w,z,y||v)},unbind:function(A,w,z){var v=this,x;if(a.isArray(A)){x=A.length;while(x--){A[x]=v.unbind(A[x],w,z)}return A}if(v.boundEvents&&(A===v.doc||A===v.win)){x=v.boundEvents.length;while(x--){var y=v.boundEvents[x];if(A==y[0]&&(!w||w==y[1])&&(!z||z==y[2])){this.events.unbind(y[0],y[1],y[2])}}}return this.events.unbind(A,w,z)},fire:function(x,w,v){return this.events.fire(x,w,v)},getContentEditable:function(w){var v;if(!w||w.nodeType!=1){return null}v=w.getAttribute("data-mce-contenteditable");if(v&&v!=="inherit"){return v}return w.contentEditable!=="inherit"?w.contentEditable:null},getContentEditableParent:function(w){var v=this.getRoot(),x=null;for(;w&&w!==v;w=w.parentNode){x=this.getContentEditable(w);if(x!==null){break}}return x},destroy:function(){var v=this;if(v.boundEvents){var w=v.boundEvents.length;while(w--){var x=v.boundEvents[w];this.events.unbind(x[0],x[1],x[2])}v.boundEvents=null}if(c.setDocument){c.setDocument()}v.win=v.doc=v.root=v.events=v.frag=null},isChildOf:function(w,v){while(w){if(v===w){return true}w=w.parentNode}return false},dumpRng:function(v){return("startContainer: "+v.startContainer.nodeName+", startOffset: "+v.startOffset+", endContainer: "+v.endContainer.nodeName+", endOffset: "+v.endOffset)},_findSib:function(z,v,x){var w=this,y=v;if(z){if(typeof y=="string"){y=function(A){return w.is(A,v)}}for(z=z[x];z;z=z[x]){if(y(z)){return z}}}return null}};s.DOM=new s(document);s.nodeIndex=q;return s});